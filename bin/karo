#!/usr/bin/env ruby

require 'optparse'
require 'methadone'
require 'karo.rb'

class App
  include Methadone::Main
  include Methadone::CLILogging
  include Methadone::SH

  main do |from, to|
    fixed_from = from.end_with?("/") ? from : from + "/"
    fixed_to   = to.end_with?("/") ? to : to + "/"

    sh "rsync -azv #{fixed_from} #{fixed_to}"
  end

  version Karo::VERSION

  description "Sync database or assets with remote servers"

  arg :from, "sync from path"
  arg :to, "sync to path"

  use_log_level_option

  go!
end
